<!doctype html>
<html>
<head>
  <meta charset='utf-8' />
  <title>stencila-js 0.4.0 | Documentation</title>
  <meta name='viewport' content='width=device-width,initial-scale=1'>
  <link href='assets/bass.css' type='text/css' rel='stylesheet' />
  <link href='assets/style.css' type='text/css' rel='stylesheet' />
  <link href='assets/github.css' type='text/css' rel='stylesheet' />
</head>
<body class='documentation'>
  <div class='max-width-4 mx-auto'>
    <div class='clearfix md-mxn2'>
      <div class='fixed xs-hide fix-3 overflow-auto max-height-100'>
        <div class='py1 px2'>
          <h3 class='mb0 no-anchor'>stencila-js</h3>
          <div class='mb1'><code>0.4.0</code></div>
          <input
            placeholder='Filter'
            id='filter-input'
            class='col12 block input'
            type='text' />
          <div id='toc'>
            <ul class='list-reset h5 py1-ul'>
              
                
                <li><a
                  href='#jscontext'
                  class=" toggle-sibling">
                  JsContext
                  <span class='icon'>▸</span>
                </a>
                
                <div class='toggle-target display-none'>
                  
                  
                    <ul class='list-reset py1-ul pl1'>
                      <li class='h5'><span>Instance members</span></li>
                      
                      <li><a
                        href='#JsContext#run'
                        class='regular pre-open'>
                        #run
                      </a></li>
                      
                      <li><a
                        href='#JsContext#call'
                        class='regular pre-open'>
                        #call
                      </a></li>
                      
                      <li><a
                        href='#JsContext#depends'
                        class='regular pre-open'>
                        #depends
                      </a></li>
                      
                      <li><a
                        href='#JsContext#_result'
                        class='regular pre-open'>
                        #_result
                      </a></li>
                      
                    </ul>
                  
                  
                </div>
                
                </li>
              
                
                <li><a
                  href='#pack'
                  class="">
                  pack
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#unpack'
                  class="">
                  unpack
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#type'
                  class="">
                  type
                  
                </a>
                
                </li>
              
            </ul>
          </div>
          <div class='mt1 h6 quiet'>
            <a href='http://documentation.js.org/reading-documentation.html'>Need help reading this?</a>
          </div>
        </div>
      </div>
      <div class='fix-margin-3'>
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    <h3 class='fl m0' id='jscontext'>
      JsContext
    </h3>
    
  </div>
  

  <p>A Javascript context</p>
<p>Implements the Stencila <code>Context</code> API. All methods return a Promise.</p>


  <div class='pre p1 fill-light mt0'>JsContext</div>

  

  
  
  
  
  

  

  

  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Instance Members</div>
    <div class="clearfix">
  
    <div class='border-bottom' id='JsContext#run'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>run(code, options)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Run JavaScript code within the global context scope (execute a code &quot;chunk&quot;)</p>
<p>In languages like R and Python it it straight forward to assign global variables</p>


  <div class='pre p1 fill-light mt0'>run(code: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, options: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>): <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>code</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code> Javascript code

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>options</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</code> Any execution options

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></code>:
        A Promise resolving to object with any 
<code>errors</code>
 (an object with line numbers as keys) and 
<code>outputs</code>
 (
a data package)

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-comment">// You can also assign global variables which are available in subsequent calls,</span>
context.call(<span class="hljs-string">'foo = "bar"\n\n'</span>) <span class="hljs-comment">// { errors: {}, output: null }</span>
context.call(<span class="hljs-string">'foo'</span>) <span class="hljs-comment">// { errors: {}, output: { type: 'str', format: 'text', value: 'bar' } }</span></pre>
    
  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='JsContext#call'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>call(code, inputs, options)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Execute JavaScript code within a local function scope (execute a code &quot;cell&quot;)</p>


  <div class='pre p1 fill-light mt0'>call(code: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, inputs: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>, options: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>): <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>code</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code> Javascript code

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>inputs</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</code> An object with a data pack for each input variable

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>options</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</code> Any execution options

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></code>:
        A Promise resolving to an object with any 
<code>errors</code>
 (an object with line numbers as keys) and 
<code>outputs</code>
 (
a data package)

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-comment">// Return statement must be used to return a value</span>
context.call(<span class="hljs-string">'return 6*7'</span>) <span class="hljs-comment">// { errors: {}, output: { type: 'int', format: 'text', value: '42' } }</span>
context.call(<span class="hljs-string">'let x = 6\nreturn x*7'</span>) <span class="hljs-comment">// { errors: {}, output: { type: 'int', format: 'text', value: '42' } }</span>

<span class="hljs-comment">// You can specify input variables (that are local to that call),</span>
context.call(<span class="hljs-string">'return Math.PI*radius'</span>, {<span class="hljs-attr">radius</span>:{<span class="hljs-attr">type</span>:<span class="hljs-string">'flt'</span>, <span class="hljs-attr">format</span>:<span class="hljs-string">'text'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'21.4'</span>}}) <span class="hljs-comment">// { errors: {}, output: { type: 'flt', format: 'text', value: '67.23008278682157' } }</span>
context.call(<span class="hljs-string">'return radius'</span>) <span class="hljs-comment">// { errors: { '1': 'ReferenceError: radius is not defined' }, output: null }</span></pre>
    
  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='JsContext#depends'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>depends(code)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Determine the dependencies for a piece of Javascript code</p>
<p>Returns an array of all variable names not declared within
the piece of code. This might include global functions.</p>


  <div class='pre p1 fill-light mt0'>depends(code: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>): <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">array</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>&gt;</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>code</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code> JavaScript code

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">array</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>&gt;</code>:
        A Promise resolving to a list of dependencies

      
    
  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='JsContext#_result'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>_result(error, offset, value, packed)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Return a result promise</p>


  <div class='pre p1 fill-light mt0'>_result(error: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>, offset: int, value: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>, packed: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>): (null | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>error</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</code> Error object, if any

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>offset</span> <code class='quiet'>(int)</code> Line number offset

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>value</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</code> The value to be packed

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>packed</span> <code class='quiet'>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>)</code> Should the output be packed (or left unpacked for calls withing Javascript)

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>(null | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</code>:
        A set of errors by line number

      
    
  

  

  

  

  

  
</section>

      </div>
    </div>
  
</div>

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    <h3 class='fl m0' id='pack'>
      pack
    </h3>
    
  </div>
  

  <p>Pack an object into a data package</p>


  <div class='pre p1 fill-light mt0'>pack(thing: anything): <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>thing</span> <code class='quiet'>(anything)</code> The Javascript object

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code>:
        A data package

      
    
  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    <h3 class='fl m0' id='unpack'>
      unpack
    </h3>
    
  </div>
  

  <p>Unpack a data package into an object</p>


  <div class='pre p1 fill-light mt0'>unpack(pkg: (<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>)): anything</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>pkg</span> <code class='quiet'>((<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>))</code> The data package

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>anything</code>:
        A Javascript object

      
    
  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    <h3 class='fl m0' id='type'>
      type
    </h3>
    
  </div>
  

  <p>Get the type code for a value</p>


  <div class='pre p1 fill-light mt0'>type</div>

  

  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>value</span> <code class='quiet'>(whatever)</code> Value you want a type for

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>:
        Type of value

      
    
  

  

  

  

  

  
</section>

          
        
      </div>
    </div>
  </div>
  <script src='assets/anchor.js'></script>
  <script src='assets/site.js'></script>
</body>
</html>
